<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Google tag (gtag.js) -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-H91Z2P4DVV"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag('js', new Date());

			gtag('config', 'G-H91Z2P4DVV');
		</script>
		<meta charset="utf-8" />
		<link rel="icon" href="%sveltekit.assets%/favicon.png" />
		<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet" />
		<meta name="viewport" content="width=device-width" />
		%sveltekit.head%
	</head>
	<body
		class="leading-normal tracking-normal gradient"
		style="font-family: 'Source Sans Pro', sans-serif"
	>
		<div>%sveltekit.body%</div>
		<!-- <script>
			var scrollpos = window.scrollY;
			var header = document.getElementById('header');
			var navcontent = document.getElementById('nav-content');
			var navaction = document.getElementById('navAction');
			var brandname = document.getElementById('brandname');
			var toToggle = document.querySelectorAll('.toggleColour');

			document.addEventListener('scroll', function () {
				/*Apply classes for slide in bar*/
				scrollpos = window.scrollY;

				if (scrollpos > 10) {
					header.classList.add('bg-white');
					// navaction.classList.remove('bg-white');
					// navaction.classList.add('gradient');
					// navaction.classList.remove('text-gray-800');
					// navaction.classList.add('text-white');
					//Use to switch toggleColour colours
					for (var i = 0; i < toToggle.length; i++) {
						toToggle[i].classList.add('text-gray-800');
						toToggle[i].classList.remove('text-white');
					}
					header.classList.add('shadow');
					// navcontent.classList.remove('bg-gray-100');
					// navcontent.classList.add('bg-white');
				} else {
					header.classList.remove('bg-white');
					// navaction.classList.remove('gradient');
					// navaction.classList.add('bg-white');
					// navaction.classList.remove('text-white');
					// navaction.classList.add('text-gray-800');
					//Use to switch toggleColour colours
					for (var i = 0; i < toToggle.length; i++) {
						toToggle[i].classList.add('text-white');
						toToggle[i].classList.remove('text-gray-800');
					}

					header.classList.remove('shadow');
					// navcontent.classList.remove('bg-white');
					// navcontent.classList.add('bg-gray-100');
				}
			});
		</script> -->
		<script>
			function validateEmail(email) {
				const re =
					/^(([^<>()[\\]\\\\.,;:\\s@"]+(\\.[^<>()[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;
				return re.test(String(email).toLowerCase());
			}

			async function registerUser() {
				const form = document.getElementById('form');
				const successBox = document.getElementById('success-box');
				const errorBox = document.getElementById('error-box');
				const feedbackBox = document.getElementById('feedback-box');
				const email = document.getElementsByName('email')[0].value;

				if (!validateEmail(email)) {
					feedbackBox.classList.add('d-block');
					return;
				}

				const headers = new Headers();
				headers.append('Content-Type', 'application/json');

				const options = {
					method: 'POST',
					headers,
					body: JSON.stringify({ email })
				};

				const response = await fetch('http://localhost:8888/.netlify/functions/index', options);

				if (response.ok) {
					form.classList.add('d-none');
					successBox.classList.remove('d-none');
				} else {
					form.classList.add('d-none');
					errorBox.classList.remove('d-none');
				}
			}
		</script>
		<script>
			/*Toggle dropdown list*/
			/*https://gist.github.com/slavapas/593e8e50cf4cc16ac972afcbad4f70c8*/

			var navMenuDiv = document.getElementById('nav-content');
			var navMenu = document.getElementById('nav-toggle');

			document.onclick = check;
			function check(e) {
				var target = (e && e.target) || (event && event.srcElement);

				//Nav Menu
				if (!checkParent(target, navMenuDiv)) {
					// click NOT on the menu
					if (checkParent(target, navMenu)) {
						// click on the link
						if (navMenuDiv.classList.contains('hidden')) {
							navMenuDiv.classList.remove('hidden');
						} else {
							navMenuDiv.classList.add('hidden');
						}
					} else {
						// click both outside link and outside menu, hide menu
						navMenuDiv.classList.add('hidden');
					}
				}
			}
			function checkParent(t, elm) {
				while (t.parentNode) {
					if (t == elm) {
						return true;
					}
					t = t.parentNode;
				}
				return false;
			}
		</script>
	</body>
</html>
