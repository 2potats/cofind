import{T as Q,S as ue,i as de,s as ce,l as g,a as O,u as fe,P as he,m as b,h as E,c as P,p as I,v as _e,q as o,F as c,b as x,U as X,V as pe,d as me,f as ve,t as ge,E as ne,W as be,X as ye,Y as Ee,Z as Te,_ as oe,O as ke,g as we,$ as Ue,n as Me}from"../../../chunks/index-6038d79b.js";import{c as A}from"../../../chunks/singletons-e5e57fbd.js";A.disable_scroll_handling;A.goto;const Oe=A.invalidate;A.prefetch;A.prefetch_routes;A.before_navigate;A.after_navigate;function Y(r,{pending:e,error:t,result:a}={}){let f;async function v(_){const i=f={};_.preventDefault();const u=new FormData(r);e&&e({data:u,form:r});try{const h=await fetch(r.action,{method:r.method,headers:{accept:"application/json"},body:u});if(i!==f)return;if(h.ok){a&&a({data:u,form:r,response:h});const l=new URL(r.action);l.search=l.hash="",Oe(l.href)}else t?t({data:u,form:r,error:null,response:h}):console.error(await h.text())}catch(h){if(t&&h instanceof Error)t({data:u,form:r,error:h,response:null});else throw h}}return r.addEventListener("submit",v),{destroy(){r.removeEventListener("submit",v)}}}function re(r){const e=r-1;return e*e*e+1}function le(r,{delay:e=0,duration:t=400,easing:a=re,start:f=0,opacity:v=0}={}){const _=getComputedStyle(r),i=+_.opacity,u=_.transform==="none"?"":_.transform,h=1-f,l=i*(1-v);return{delay:e,duration:t,easing:a,css:(w,T)=>`
			transform: ${u} scale(${1-h*T});
			opacity: ${i-l*T}
		`}}function Pe(r,{from:e,to:t},a={}){const f=getComputedStyle(r),v=f.transform==="none"?"":f.transform,[_,i]=f.transformOrigin.split(" ").map(parseFloat),u=e.left+e.width*_/t.width-(t.left+_),h=e.top+e.height*i/t.height-(t.top+i),{delay:l=0,duration:w=U=>Math.sqrt(U)*120,easing:T=re}=a;return{delay:l,duration:Q(w)?w(Math.sqrt(u*u+h*h)):w,easing:T,css:(U,p)=>{const y=p*u,F=p*h,s=U+p*e.width/t.width,n=U+p*e.height/t.height;return`transform: ${v} translate(${y}px, ${F}px) scale(${s}, ${n});`}}}function se(r,e,t){const a=r.slice();return a[3]=e[t],a[4]=e,a[5]=t,a}function ie(r,e){let t,a,f,v,_,i,u,h,l,w,T,U,p,y,F,s,n,d,S,$,R,N,q,H,Z,C,V,j,z,D,G,J=Me,M,K,ee;function te(...k){return e[1](e[3],e[4],e[5],...k)}function ae(){return e[2](e[3],e[4],e[5])}return{key:r,first:null,c(){t=g("div"),a=g("form"),f=g("input"),_=O(),i=g("input"),h=O(),l=g("button"),U=O(),p=g("form"),y=g("input"),s=O(),n=g("input"),S=O(),$=g("button"),R=O(),N=g("form"),q=g("input"),Z=O(),C=g("button"),z=O(),this.h()},l(k){t=b(k,"DIV",{class:!0});var m=I(t);a=b(m,"FORM",{action:!0,method:!0});var B=I(a);f=b(B,"INPUT",{type:!0,name:!0}),_=P(B),i=b(B,"INPUT",{type:!0,name:!0}),h=P(B),l=b(B,"BUTTON",{class:!0,"aria-label":!0}),I(l).forEach(E),B.forEach(E),U=P(m),p=b(m,"FORM",{class:!0,action:!0,method:!0});var L=I(p);y=b(L,"INPUT",{type:!0,name:!0}),s=P(L),n=b(L,"INPUT",{"aria-label":!0,type:!0,name:!0}),S=P(L),$=b(L,"BUTTON",{class:!0,"aria-label":!0}),I($).forEach(E),L.forEach(E),R=P(m),N=b(m,"FORM",{action:!0,method:!0});var W=I(N);q=b(W,"INPUT",{type:!0,name:!0}),Z=P(W),C=b(W,"BUTTON",{class:!0,"aria-label":!0}),I(C).forEach(E),W.forEach(E),z=P(m),m.forEach(E),this.h()},h(){o(f,"type","hidden"),o(f,"name","uid"),f.value=v=e[3].uid,o(i,"type","hidden"),o(i,"name","done"),i.value=u=e[3].done?"":"true",o(l,"class","toggle"),o(l,"aria-label",w="Mark todo as "+(e[3].done?"not done":"done")),o(a,"action","/todos?_method=PATCH"),o(a,"method","post"),o(y,"type","hidden"),o(y,"name","uid"),y.value=F=e[3].uid,o(n,"aria-label","Edit todo"),o(n,"type","text"),o(n,"name","text"),n.value=d=e[3].text,o($,"class","save"),o($,"aria-label","Save todo"),o(p,"class","text"),o(p,"action","/todos?_method=PATCH"),o(p,"method","post"),o(q,"type","hidden"),o(q,"name","uid"),q.value=H=e[3].uid,o(C,"class","delete"),o(C,"aria-label","Delete todo"),C.disabled=V=e[3].pending_delete,o(N,"action","/todos?_method=DELETE"),o(N,"method","post"),o(t,"class","todo"),ne(t,"done",e[3].done),this.first=t},m(k,m){x(k,t,m),c(t,a),c(a,f),c(a,_),c(a,i),c(a,h),c(a,l),c(t,U),c(t,p),c(p,y),c(p,s),c(p,n),c(p,S),c(p,$),c(t,R),c(t,N),c(N,q),c(N,Z),c(N,C),c(t,z),M=!0,K||(ee=[X(T=Y.call(null,a,{pending:te})),X(Y.call(null,p)),X(j=Y.call(null,N,{pending:ae}))],K=!0)},p(k,m){e=k,(!M||m&1&&v!==(v=e[3].uid))&&(f.value=v),(!M||m&1&&u!==(u=e[3].done?"":"true"))&&(i.value=u),(!M||m&1&&w!==(w="Mark todo as "+(e[3].done?"not done":"done")))&&o(l,"aria-label",w),T&&Q(T.update)&&m&1&&T.update.call(null,{pending:te}),(!M||m&1&&F!==(F=e[3].uid))&&(y.value=F),(!M||m&1&&d!==(d=e[3].text)&&n.value!==d)&&(n.value=d),(!M||m&1&&H!==(H=e[3].uid))&&(q.value=H),(!M||m&1&&V!==(V=e[3].pending_delete))&&(C.disabled=V),j&&Q(j.update)&&m&1&&j.update.call(null,{pending:ae}),m&1&&ne(t,"done",e[3].done)},r(){G=t.getBoundingClientRect()},f(){be(t),J(),ye(t,G)},a(){J(),J=Ee(t,G,Pe,{duration:200})},i(k){M||(k&&Te(()=>{D||(D=oe(t,le,{start:.7},!0)),D.run(1)}),M=!0)},o(k){k&&(D||(D=oe(t,le,{start:.7},!1)),D.run(0)),M=!1},d(k){k&&E(t),k&&D&&D.end(),K=!1,ke(ee)}}}function Ne(r){let e,t,a,f,v,_,i,u,h,l=[],w=new Map,T,U,p,y=r[0].todos;const F=s=>s[3].uid;for(let s=0;s<y.length;s+=1){let n=se(r,y,s),d=F(n);w.set(d,l[s]=ie(d,n))}return{c(){e=g("meta"),t=O(),a=g("div"),f=g("h1"),v=fe("Todos"),_=O(),i=g("form"),u=g("input"),h=O();for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){const n=he('[data-svelte="svelte-aw2gey"]',document.head);e=b(n,"META",{name:!0,content:!0}),n.forEach(E),t=P(s),a=b(s,"DIV",{class:!0});var d=I(a);f=b(d,"H1",{});var S=I(f);v=_e(S,"Todos"),S.forEach(E),_=P(d),i=b(d,"FORM",{class:!0,action:!0,method:!0});var $=I(i);u=b($,"INPUT",{name:!0,"aria-label":!0,placeholder:!0}),$.forEach(E),h=P(d);for(let R=0;R<l.length;R+=1)l[R].l(d);d.forEach(E),this.h()},h(){document.title="Todos",o(e,"name","description"),o(e,"content","A todo list app"),o(u,"name","text"),o(u,"aria-label","Add todo"),o(u,"placeholder","+ tap to add a todo"),o(i,"class","new"),o(i,"action","/todos"),o(i,"method","post"),o(a,"class","todos")},m(s,n){c(document.head,e),x(s,t,n),x(s,a,n),c(a,f),c(f,v),c(a,_),c(a,i),c(i,u),c(a,h);for(let d=0;d<l.length;d+=1)l[d].m(a,null);T=!0,U||(p=X(Y.call(null,i,{result:Ie})),U=!0)},p(s,[n]){if(n&1){y=s[0].todos,we();for(let d=0;d<l.length;d+=1)l[d].r();l=pe(l,n,F,1,s,y,w,a,Ue,ie,null,se);for(let d=0;d<l.length;d+=1)l[d].a();me()}},i(s){if(!T){for(let n=0;n<y.length;n+=1)ve(l[n]);T=!0}},o(s){for(let n=0;n<l.length;n+=1)ge(l[n]);T=!1},d(s){E(e),s&&E(t),s&&E(a);for(let n=0;n<l.length;n+=1)l[n].d();U=!1,p()}}}const Ie=async({form:r})=>{r.reset()};function Fe(r,e,t){let{data:a}=e;const f=(_,i,u,{data:h})=>{i[u].done=!!h.get("done")},v=(_,i,u)=>t(0,i[u].pending_delete=!0,a);return r.$$set=_=>{"data"in _&&t(0,a=_.data)},[a,f,v]}class De extends ue{constructor(e){super(),de(this,e,Fe,Ne,ce,{data:0})}}export{De as default};
